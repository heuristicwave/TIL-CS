## Chap11. 포인터



### 포인터란?

메모리의 주소를 가지고 있는 변수. 컴퓨터에서 메모리는 바이트 단위로 주소가 매겨진다.

```c
int i = 10;
printf("i의 주소: %u\n", &i);	// 변수 i의 주소출력 - %u 부호없는 정수형(unsigned)
```



### 포인터의 선언

포인터는 변수의 주소를 가지고 있는 변수이다. 포인터는 변수이지만 저장하고 있는 것이 메모리의 주소이다. 변수임을 강조하기 위해서 때때로 **포인터 변수**라고 한다. 따라서 사용하기 전에 선언되어야 한다.  

```c
int *p;	// 포인터가 가리키게 되는 대상(int)을 먼저 쓰고 *를 붙이고 포인터의 이름(p)을 씀
```



### 포인터 초기화

10000번지를 (int *) 타입으로 형변환하여서 포인터 p를 초기화 하기
```c
int *p = (int *)10000;
```

임베디드 장치에서는 위와 같은 문장이 가능, 운영체제가 메모리를 관리하는 PC에서는 &연산자를 이용한다.

```c
int i = 10;
int *p;
p = &i;	// 포인터 p에 변수 i의 주소를 저장한다.

int *pi = NULL; // 지역변수로 포인터를 선언하고 초기화 시키지 않으면 쓰레기값이 저장됨
// NULL 값을 저장하는 것은 주소가 0
```

>NULL은 stdio.h 헤더 파일에 다음과 같이 정의된 포인터 상수로 0번지를 의미한다.
>
>NULL이 들어있는 포인터를 널 포인터(null pointer) 
>
>```c
>#define NULL ((void *)0)	// 포인터 변수의 값이 0이면 아무것도 가리키고 있지 않다.
>```



### 간접 참조 연산자 *

포인터 p가 가리키는 주소에 저장된 내용을 읽으려면 p앞에 * 기호를 붙여서 *p하면 된다. => 간접 참조

```c
int i = 10;
int *p;
p = &i;
printf("%d \n", *p);	// 10이 출력
```



### 간접 참조 연산자 *의 해석

*p는 p가 가리키는 위치에 있는 데이터를 가져오라는 의미

p는 p가 가리키는 위치에 무엇이 있는지 모르기 때문에, p가 int형 포인터면 p가 가리키는 위치에 정수가 있다고 가정하고 4바이트를 읽어 들인다.

```c
/// PC에서는 사용 불가
int *pi = (int *)10000;		// 10000번지로 부터 4바이트를 읽어
```



#### &연산자와 *연산자

&연산자 : 변수의 주소를 구하여 간접 참조할 때 사용

*연산자 : 포인터를 통하여 변수를 간접 참조할 때 사용

```c
int i = 3000;
int *p = NULL;

p = &i;

printf("p = %u\n", p);		// 	1245024													
printf("&i = %u\n\n", &i);	//	1245024

printf("i = %d\n", i);		//	3000
printf("*p = %d\n", *p);	//	3000
```



### 포인터 사용시 주의할 점

#### 초기화하지 않고 사용하기

포인터가 아무것도 가리키고 있지 않을 때는 NULL로 설정하는 것이 바람직



#### 포인터 타입과 변수의 타입을 일치하여야 한다

double형 포인터가 int형 변수의 주소가 대입될 경우, 변수 i의 범위를 넘어가서 이웃 바이트를 덮어쓰게 된다.



#### 절대주소 사용

절대 주소는 임베디드 시스템에서만 사용한다.



### 포인터 연산

#### 덧셈과 뺄셈 연산

포인터에 정수를 더하면 포인터의 값에 증가되는 것이 아니라 포인터가 가리키는 자료형의 크기만큼 증가된다.



#### 간접 참조 연산자와 증감 연산자

증감 연산자는 간접 참조 연산지인 *와 같이 사용 될 수 있다.

주의할 점은 증감 연산자를 포인터에 적용할 수도 있고 포인터가 가리키는 대상에 적용할 수도 있다.

```c
*p++;	// p가 가리키는 위치에서 값을 가져온 후에 포인터 p를 증가한다.
=> *p를 먼저 수행한 후에 p에 대하여 ++가 실행된다.
    
// 포인터가 가리키는 대상의 값을 증가하려고 했으면 다음과 같다
(*p)++;
```



예제

```c
main(void)
{
    int i = 10;
    int *pi = &i;
    
    printf()
}
```





#### 포인터의 형변환

p484 이후