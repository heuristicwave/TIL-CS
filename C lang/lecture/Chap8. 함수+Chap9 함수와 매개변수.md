## Chap8. 함수



### Hands-On

p332 factorial.c  

p335 combination.c

p346 racing_game.c

p348 SetPixel



<br>



## Chap9. 함수와 변수

#### 지역변수

지역변수는 블록의 맨 첫 부분에서 정의되어야 한다.

지역변수는 변수가 선언된 블록 안에서만 접근과 사용이 가능하다.



#### 생존시간

전역 변수는 프로그램이 시작되기 전에 만들어지고 프로그램이 끝날 때까지 계속 존재한다.

지역 변수는 선언된 블록이 시작할 때 stack라 불리는 메모리 공간에 만들어진다.

지역 변수에 할당된 메모리 공간은 블록 끝에서 반환된다. 이때 지역 변수도 사라지게 된다.



#### 함수의 매개 변수

함수의 헤더 부분에 정의된 매개 변수도 일종의 지역 변수이다.

지역변수와 다른 점은 함수 호출시의 인수 값으로 초기화 되어 있다.

**인수가 매개 변수로 전달될 때는 값에 의한 호출(call by value)을 사용한다.**

<br>



#### 같은 이름의 전역 변수와 지역 변수

전역과 지역의 이름이 같다면 지역 변수가 전역 변수보다 우선시 된다.



### 생존 시간

- 정적 할당 : 프로그램이 실행되는 동안에는 계속하여서 변수에 저장 공간이 할당되어 있는 방법
- 자동 할당 : 블록이 시작되면서 변수에 저장 공간이 할당되고 블록이 종료되면 저장 공간이 회수

1. 변수가 선언되는 위치

   전역 변수는 정적 할당된다. 지역 변수는 기본적으로 자동 할당. 하지만 지역변수 앞에 저장 유형 지정자를 붙이면 정적 할당으로 변경 가능.

2. 저장 유형 지정자 (auto, register, static, extern)

   변수나 함수를 선언할 때에 어디에 저장되는 지를 지정한다. 만약 저장 유형 지정자가 생략되면 변수가 선언되는 위치에 따라 변수의 저장 유형이 자동으로 결정



##### auto

자동 변수로 선언하려면 원칙적으로 auto라는 키워드를 붙인다.



##### static

블록을 벗어나도 자동으로 제거되지 않도록 **정적 변수**로 키워드 static를 붙여 만듬.

정적변수는 전역변수와 같이 프로그램이 시작할 때 메모리에 생성되고 프로그램이 실행을 종료하면 메모리에서 제거된다.

외부 함수를 호출할때, 외부함수에 static으로 선언된 count변수가 있다면 몇 번 호출되었는지 알 수 있다.

-> 로그인 횟수 제한에 활용가능



##### register

변수를 메모리에 저장하는 것이 아니라 레지스터에 저장한다. 레지스터는 CPU의 일부분이기 때문에 데이터를 읽고 쓰는 속도가 아주 빠르다.

지역변수만 가능하다. 블록이 시작되면서 레지스터 변수는 레지스터에 할당되고 블록이 끝나면서 레지스터에서 제거된다. 레지스터는 주소가 없기 때문에 주소를 추출하는 연산자 &를 적용하면 컴파일 오류가 발생한다.



### 연결

다른 범위에 속하는 변수들을 서로 연결하는 것을 의미한다.

- no linkage : 지역 변수로서 외부와 연결을 가지지 않는다.

- external linkage : 전역 변수로서 여러 개의 소스 파일에 걸쳐서 사용된다.

  하나의 파일에서 전역 변수를 선언하고 다른 파일에서는 extern 지정자를 사용하여 이 변수를 참조

  만약 extern 키워드를 사용하지 않으면 전역 변수가 외부 연결 가능하다 해도 다른 소스 파일에서 참조할 수 없다.

  즉, extern으로 변수를 정의하면 저장 공간이 할당 되지 않는다. 외부에서 선언된 변수를 사용한다는 의미

- internal linkage : 전역 변수로서 하나의 소스 파일에서만 사용이 가능하다.

  전역 변수 앞에 static이 붙으면 내부연결이 되고 다른 소스파일에서 extern 키워드를 사용해도 사용할 수 없다.



### 가변 매개 변수 함수

원칙적으로 함수의 매개 변수의 개수는 고정되어 있다. 경우에 따라서 매개 변수의 개수가 호출할 때마다 달라지는 기능을 제공한다. ex) printf

[레퍼런스 보기](https://dojang.io/mod/page/view.php?id=577)

```c
#include <stdio.h>
#include <stdarg.h>    // va_list, va_start, va_arg, va_end가 정의된 헤더 파일

void printNumbers(int args, ...)    // 가변 인자의 개수를 받음, ...로 가변 인자 설정
{
    va_list ap;    // 가변 인자 목록 포인터

    va_start(ap, args);    // 가변 인자 목록 포인터 설정
    for (int i = 0; i < args; i++)    // 가변 인자 개수만큼 반복
    {
        int num = va_arg(ap, int);    // int 크기만큼 가변 인자 목록 포인터에서 값을 가져옴
                                      // ap를 int 크기만큼 순방향으로 이동
        printf("%d ", num);           // 가변 인자 값 출력
    }
    va_end(ap);    // 가변 인자 목록 포인터를 NULL로 초기화

    printf("\n");    // 줄바꿈
}

int main()
{
    printNumbers(1, 10);                // 인수 개수 1개
    printNumbers(2, 10, 20);            // 인수 개수 2개
    printNumbers(3, 10, 20, 30);        // 인수 개수 3개
    printNumbers(4, 10, 20, 30, 40);    // 인수 개수 4개

    return 0;
}
```



### 순환



### Hands-On
p397 factorial.c (8장의 반복문을 재귀로 작성)
p400 print_binary.c
p401 gcd.c
p404 hanoi_tower.c
